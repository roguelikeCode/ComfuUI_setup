# 準備
# mambaをインストール（Condaと互換性のあるパッケージマネージャー）
# condaより高速（入れていないと1日経ってもインストールが終わらない）

conda install mamba -n base -c conda-forge -y

# WSLのLinux環境（例: Ubuntu）をセットアップした直後は、C++のコンパイルに必要なビルドツール群がインストールされていない
# 基本的なビルドツールであるg++ (GNU C++ Compiler), gcc (GNU C Compiler), make, cmakeをインストールする

# パッケージリストの更新
sudo apt update

# build-essential パッケージのインストール
sudo apt install build-essential -y

# cmake のインストール
sudo apt install cmake -y

# 最初に忘れずに
# LinuxのパスはWindowsと逆であるため
# 必要であれば（cd "$(wslpath 'C:\Users\yoshi\OneDrive\Desktop\ComfyUI-master')"）

conda activate comfyui_wsl_poetry_py310_cu118_env

# 現在アクティブなConda環境のPython実行ファイルのパスを連携させる
cd ~/projects/comfyui-managed-env
poetry env use $(which python)

poetry add "torch==2.7.0" --source="pytorch_cu118"
poetry add "torchvision==0.22.0" --source="pytorch_cu118"
poetry add "torchaudio==2.7.0" --source="pytorch_cu118"
